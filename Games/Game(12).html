<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <title>ðŸŒŸ Ø§Ø¬Ù…Ø¹ Ø§Ù„Ù†Ø¬ÙˆÙ… ÙˆØ§Ù‡Ø±Ø¨ Ù…Ù† Ø§Ù„Ù‚Ù†Ø§Ø¨Ù„</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      text-align: center;
      font-family: Arial, sans-serif;
      direction: rtl;
      background-color: #222;
      color: #fff;
    }
    canvas {
      background-color: #333;
      display: block;
      margin: 0 auto;
      border: 3px solid #fff;
    }
    h1 {
      margin: 20px;
    }
    #score {
      font-size: 24px;
      margin-top: 10px;
    }
  </style>
</head>
<body>

<h1>ðŸŽ® Ø§Ø¬Ù…Ø¹ Ø§Ù„Ù†Ø¬ÙˆÙ… ÙˆØ§Ù‡Ø±Ø¨ Ù…Ù† Ø§Ù„Ù‚Ù†Ø§Ø¨Ù„</h1>
<canvas id="gameCanvas" width="600" height="400"></canvas>
<div id="score">Ø§Ù„Ù†Ù‚Ø§Ø·: 0</div>

<script>
  const canvas = document.getElementById('gameCanvas');
  const ctx = canvas.getContext('2d');

  let player = { x: 50, y: 180, size: 20, speed: 5 };
  let stars = [];
  let bombs = [];
  let score = 0;
  let gameOver = false;

  // Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ø­Ø±ÙƒØ©
  let keys = {};
  document.addEventListener('keydown', e => keys[e.key] = true);
  document.addEventListener('keyup', e => keys[e.key] = false);

  function drawPlayer() {
    ctx.fillStyle = 'lime';
    ctx.fillRect(player.x, player.y, player.size, player.size);
  }

  function drawStar(star) {
    ctx.fillStyle = 'yellow';
    ctx.beginPath();
    ctx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
    ctx.fill();
  }

  function drawBomb(bomb) {
    ctx.fillStyle = 'red';
    ctx.beginPath();
    ctx.arc(bomb.x, bomb.y, bomb.size, 0, Math.PI * 2);
    ctx.fill();
  }

  function updateGame() {
    if (gameOver) return;

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Ø­Ø±ÙƒØ© Ø§Ù„Ù„Ø§Ø¹Ø¨
    if (keys['ArrowUp'] && player.y > 0) player.y -= player.speed;
    if (keys['ArrowDown'] && player.y < canvas.height - player.size) player.y += player.speed;
    if (keys['ArrowLeft'] && player.x > 0) player.x -= player.speed;
    if (keys['ArrowRight'] && player.x < canvas.width - player.size) player.x += player.speed;

    drawPlayer();

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ø¬ÙˆÙ…
    stars.forEach((star, i) => {
      star.x -= star.speed;
      drawStar(star);

      if (isColliding(player, star)) {
        stars.splice(i, 1);
        score++;
        document.getElementById('score').textContent = 'Ø§Ù„Ù†Ù‚Ø§Ø·: ' + score;
      }
    });

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ù†Ø§Ø¨Ù„
    bombs.forEach((bomb, i) => {
      bomb.x -= bomb.speed;
      drawBomb(bomb);

      if (isColliding(player, bomb)) {
        endGame();
      }
    });

    requestAnimationFrame(updateGame);
  }

  function spawnStar() {
    if (gameOver) return;
    stars.push({
      x: canvas.width + 20,
      y: Math.random() * (canvas.height - 20),
      size: 10,
      speed: 2 + Math.random() * 2
    });
    setTimeout(spawnStar, 1000 + Math.random() * 2000);
  }

  function spawnBomb() {
    if (gameOver) return;
    bombs.push({
      x: canvas.width + 20,
      y: Math.random() * (canvas.height - 20),
      size: 15,
      speed: 3 + Math.random() * 3
    });
    setTimeout(spawnBomb, 1500 + Math.random() * 2000);
  }

  function isColliding(a, b) {
    return (
      a.x < b.x + b.size &&
      a.x + a.size > b.x &&
      a.y < b.y + b.size &&
      a.y + a.size > b.y
    );
  }

  function endGame() {
    gameOver = true;
    ctx.fillStyle = 'white';
    ctx.font = '30px Arial';
    ctx.fillText('ðŸ’¥ Ø®Ø³Ø±Øª! Ù†Ù‚Ø§Ø·Ùƒ: ' + score, 150, 200);
  }

  // Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
  updateGame();
  spawnStar();
  spawnBomb();
</script>

</body>
</html>