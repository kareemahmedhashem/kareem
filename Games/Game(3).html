
<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8" />
<title>لعبة قتال بسيطة</title>
<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    direction: rtl;
    background-color: #f5f5f5;
    margin-top: 50px;
  }
  #game {
    display: inline-block;
    background: #fff;
    padding: 20px 40px;
    border-radius: 10px;
    box-shadow: 0 0 15px #ccc;
  }
  button {
    font-size: 18px;
    padding: 10px 20px;
    margin: 10px;
    cursor: pointer;
  }
  .status {
    margin: 15px 0;
    font-weight: bold;
    font-size: 20px;
  }
</style>
</head>
<body>

<div id="game">
  <h1>لعبة قتال بسيطة</h1>
  
  <div class="status" id="playerHp">حياتك: 100</div>
  <div class="status" id="enemyHp">حياة الخصم: 100</div>
  
  <button onclick="playerAttack()">هجوم 🗡️</button>
  <button onclick="playerDefend()">دفاع 🛡️</button>
  
  <div id="log" style="margin-top:20px; min-height: 80px;"></div>
</div>

<script>
  let playerHp = 100;
  let enemyHp = 100;
  let playerDefending = false;

  function updateStatus() {
    document.getElementById('playerHp').textContent = `حياتك: ${playerHp}`;
    document.getElementById('enemyHp').textContent = `حياة الخصم: ${enemyHp}`;
  }

  function logMessage(msg) {
    const log = document.getElementById('log');
    log.innerHTML = msg + '<br>' + log.innerHTML;
  }

  function enemyAction() {
    if (enemyHp <= 0 || playerHp <= 0) return;

    let enemyAttackPower = Math.floor(Math.random() * 20) + 5;

    if (playerDefending) {
      enemyAttackPower = Math.floor(enemyAttackPower / 2);
      logMessage(`أنت دافعت! ضرر الخصم تقلص إلى ${enemyAttackPower}`);
    }

    playerHp -= enemyAttackPower;
    if (playerHp < 0) playerHp = 0;

    logMessage(`الخصم هاجمك وسبب لك ضرر ${enemyAttackPower}`);
    playerDefending = false;

    updateStatus();
    checkGameOver();
  }

  function playerAttack() {
    if (playerHp <= 0 || enemyHp <= 0) return;

    let attackPower = Math.floor(Math.random() * 25) + 10;
    enemyHp -= attackPower;
    if (enemyHp < 0) enemyHp = 0;

    logMessage(`هاجمت الخصم وسببت له ضرر ${attackPower}`);
    updateStatus();
    checkGameOver();

    setTimeout(enemyAction, 1000);
  }

  function playerDefend() {
    if (playerHp <= 0 || enemyHp <= 0) return;

    playerDefending = true;
    logMessage('اخترت الدفاع، ستقلل ضرر هجوم الخصم القادم.');
    setTimeout(enemyAction, 1000);
  }

  function checkGameOver() {
    if (playerHp <= 0) {
      logMessage('💀 خسرت! انتهت حياتك.');
      alert('💀 خسرت! حاول مرة أخرى.');
    } else if (enemyHp <= 0) {
      logMessage('🎉 فزت! انتهت حياة الخصم.');
      alert('🎉 مبروك! فزت في المعركة.');
    }
  }

  updateStatus();
</script>

</body>
</html>