<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>اختبر رد فعلك!</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      direction: rtl;
      background-color: #f0f0f0;
      padding: 50px;
    }
    #gameBox {
      width: 300px;
      height: 300px;
      margin: 40px auto;
      background-color: #3498db;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 24px;
      color: white;
      cursor: pointer;
      border-radius: 10px;
    }
    #info {
      font-size: 22px;
      margin-top: 20px;
    }
    button {
      font-size: 20px;
      padding: 10px 20px;
      margin-top: 20px;
    }
  </style>
</head>
<body>

<h1>⏱️ اختبر سرعة رد فعلك!</h1>

<div id="gameBox" onclick="boxClicked()">اضغط هنا لبدء الاختبار</div>
<div id="info">اضغط على المربع عند تغيّر لونه!</div>
<button onclick="startGame()">ابدأ اللعبة</button>

<script>
  let startTime, timeout;
  let ready = false;
  let waiting = false;

  function startGame() {
    const box = document.getElementById('gameBox');
    const info = document.getElementById('info');

    box.style.backgroundColor = '#3498db';
    box.textContent = 'انتظر...';
    info.textContent = 'لا تضغط حتى يتغير اللون!';
    ready = false;
    waiting = true;

    // وقت عشوائي بين 2 إلى 5 ثوانٍ
    const delay = Math.floor(Math.random() * 3000) + 2000;

    timeout = setTimeout(() => {
      box.style.backgroundColor = '#2ecc71';
      box.textContent = 'اضغط الآن!';
      startTime = Date.now();
      ready = true;
    }, delay);
  }

  function boxClicked() {
    const box = document.getElementById('gameBox');
    const info = document.getElementById('info');

    if (!waiting) return;

    if (!ready) {
      clearTimeout(timeout);
      waiting = false;
      info.textContent = '❌ ضغطت مبكر جدًا! حاول مرة أخرى.';
      box.style.backgroundColor = '#e74c3c';
      box.textContent = 'فشل';
    } else {
      const reactionTime = Date.now() - startTime;
      info.textContent = `✅ أحسنت! وقت رد فعلك: ${reactionTime} مللي ثانية`;
      box.textContent = `${reactionTime}ms`;
      waiting = false;
    }
  }
</script>

</body>
</html>
